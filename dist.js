const fs=require("fs"),path=require("path"),{exec:exec}=require("child_process"),colors=require("colors"),files=["dist","README.md","LICENSE","package.json"],packageJsonPath=path.resolve(__dirname,"package.json"),packageJson=JSON.parse(fs.readFileSync(packageJsonPath,"utf8"));packageJson.main="dist/index.min.js",packageJson.files=files,fs.writeFileSync(packageJsonPath,JSON.stringify(packageJson,null,2)),console.log(colors.green("Successfully updated package.json")),console.log(colors.blue("Executing npm run build..."));const buildProcess=exec("npm run build");buildProcess.stdout.on("data",e=>{process.stdout.write(e)}),buildProcess.stderr.on("data",e=>{process.stderr.write(e)}),buildProcess.on("close",e=>{0===e?console.log("npm run build completed successfully."):console.error(`npm run build failed with code ${e}.`)});